// Generated by CoffeeScript 1.6.2
(function() {
  var Loader, require, resolve, use_cache, _ref,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  if (typeof window !== "undefined" && window !== null) {
    window.modules['intentware/ajax'] = window.exports = window.Intentware.Ajax = {};
  } else {
    return;
  }

  exports.Loader = Loader = (function(_super) {
    __extends(_Class, _super);

    function _Class() {
      _ref = _Class.__super__.constructor.apply(this, arguments);
      return _ref;
    }

    _Class.prototype.success = function(text) {
      return this.onSuccess(this.processScripts('window.exports = {};\n' + text));
    };

    return _Class;

  })(Request);

  use_cache = true;

  window.require = require = function(modulename, filename, options) {
    var cachedModule, cur_use_cache, request, result;

    if (arguments.length === 2 && Object.prototype.toString.apply(filename !== '[object String]')) {
      options = filename;
      filename = null;
    }
    if (filename == null) {
      filename = modulename;
    }
    filename = resolve(filename);
    if ((options != null ? options.use_cache : void 0) != null) {
      cur_use_cache = use_cache;
      use_cache = options.use_cache;
    }
    result = typeof Intentware._require === "function" ? Intentware._require(filename) : void 0;
    if (result != null) {
      return result;
    }
    if (use_cache) {
      cachedModule = window.modules[filename];
      if (cachedModule != null) {
        return cachedModule;
      }
    }
    window.exports = {};
    request = new Loader({
      url: '/static/ijax/' + filename + '.js',
      async: false,
      onSuccess: null,
      onFailure: function(xhr) {
        return alert('Error: ' + xhr.status);
      }
    }).get();
    result = window.modules[filename] = window.exports;
    window.exports = void 0;
    if ((options != null ? options.use_cache : void 0) != null) {
      use_cache = cur_use_cache;
    }
    return result;
  };

  window.require.resolve = resolve = function(filename) {
    var i;

    filename = filename.toLowerCase().replace(/^\.\//, '').replace(/\.\.\//g, '').replace(/^general\//, '').replace(/^client\//, '');
    return filename = (i = filename.lastIndexOf('.')) >= 0 ? filename.slice(0, i) : filename;
  };

  window.require.cache = function(used) {
    return use_cache = used;
  };

  /*
  CSS Browser Selector v0.4.0 (Nov 02, 2010)
  Rafael Lima (http://rafael.adm.br)
  http://rafael.adm.br/css_browser_selector
  License: http://creativecommons.org/licenses/by/2.5/
  Contributors: http://rafael.adm.br/css_browser_selector#contributors
  */


  (function(u) {
    var b, c, g, h, is_, m, o, s, ua, w;

    ua = u.toLowerCase();
    is_ = function(t) {
      return ua.indexOf(t) > -1;
    };
    g = "gecko";
    w = "webkit";
    s = "safari";
    o = "opera";
    m = "mobile";
    h = document.documentElement;
    b = [(!(/opera|webtv/i.test(ua)) && /msie\s(\d)/.test(ua) ? "ie ie" + RegExp.$1 : (is_("firefox/2") ? g + " ff2" : (is_("firefox/3.5") ? g + " ff3 ff3_5" : (is_("firefox/3.6") ? g + " ff3 ff3_6" : (is_("firefox/3") ? g + " ff3" : (is_("gecko/") ? g : (is_("opera") ? o + (/version\/(\d+)/.test(ua) ? " " + o + RegExp.$1 : (/opera(\s|\/)(\d+)/.test(ua) ? " " + o + RegExp.$2 : "")) : (is_("konqueror") ? "konqueror" : (is_("blackberry") ? m + " blackberry" : (is_("android") ? m + " android" : (is_("chrome") ? w + " chrome" : (is_("iron") ? w + " iron" : (is_("applewebkit/") ? w + " " + s + (/version\/(\d+)/.test(ua) ? " " + s + RegExp.$1 : "") : (is_("mozilla/") ? g : "")))))))))))))), (is_("j2me") ? m + " j2me" : (is_("iphone") ? m + " iphone" : (is_("ipod") ? m + " ipod" : (is_("ipad") ? m + " ipad" : (is_("mac") ? "mac" : (is_("darwin") ? "mac" : (is_("webtv") ? "webtv" : (is_("win") ? "win" + (is_("windows nt 6.0") ? " vista" : "") : (is_("freebsd") ? "freebsd" : (is_("x11") || is_("linux") ? "linux" : "")))))))))), "js"];
    c = b.join(" ");
    h.className += " " + c;
    return c;
  })(navigator.userAgent);

}).call(this);
