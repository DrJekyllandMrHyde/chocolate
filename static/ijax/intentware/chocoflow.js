// Generated by CoffeeScript 1.6.2
(function() {
  var _module;

  _module = typeof window !== "undefined" && window !== null ? window : module;

  _module.exports = {
    serialize: function(self, fn) {
      var defer, defered, next;

      if (typeof self === 'function') {
        fn = self;
        self = fn;
      }
      defered = [];
      defer = function(fn) {
        return defered.push(function(next) {
          return fn.call(self, next);
        });
      };
      fn.call(self, defer);
      return defered.shift().call(self, next = function() {
        if (defered.length) {
          return defered.shift().call(self, next);
        }
      });
    }
  };

  if (typeof window !== "undefined" && window !== null) {
    window.Intentware.async = window.exports;
  }

}).call(this);
