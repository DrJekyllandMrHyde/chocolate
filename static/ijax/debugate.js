// Generated by CoffeeScript 1.6.2
(function() {
  var Debugate, _module,
    __slice = [].slice;

  Debugate = (function() {
    function Debugate() {}

    Debugate.log = function() {
      var what, x;

      what = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      return console.log('DEBUG:', ((function() {
        var _i, _len, _results;

        _results = [];
        for (_i = 0, _len = what.length; _i < _len; _i++) {
          x = what[_i];
          _results.push("" + x);
        }
        return _results;
      })()).join(' '));
    };

    Debugate.profile = (function() {
      var count, fn, fn_now, fns, pulse, start, time, total;

      count = {};
      start = {};
      time = {};
      pulse = {};
      total = {
        count: 0,
        time: 0
      };
      if (typeof window === "undefined" || window === null) {
        try {
          fn = require('microtime');
          fn_now = function() {
            return fn.now();
          };
        } catch (_error) {}
      }
      if (fn_now == null) {
        fn_now = function() {
          return Date.now() * 1000;
        };
      }
      return fns = {
        count: function(x) {
          var _ref;

          if ((_ref = count[x]) == null) {
            count[x] = 0;
          }
          count[x] += 1;
          return total.count += 1;
        },
        start: function(x) {
          fns.count(x);
          start[x] = fn_now();
        },
        end: function(x, xx) {
          var lapse, now, _ref;

          now = fn_now();
          if ((_ref = time[x]) == null) {
            time[x] = 0;
          }
          time[x] += lapse = now - start[x];
          total.time += lapse;
          start[x] = null;
          if (xx != null) {
            start[xx] = now;
            fns.count(xx);
          }
        },
        toggle: function(x) {
          if (start[x] == null) {
            return fns.start(x);
          } else {
            return fns.end(x);
          }
        },
        pulse: function(x, reset) {
          var xx, _ref;

          if ((_ref = pulse[x]) == null) {
            pulse[x] = 0;
          }
          if (reset === true) {
            pulse[x] = 0;
          }
          if (start[xx = x + pulse[x]] == null) {
            return fns.start(xx);
          } else {
            if (reset !== false) {
              return fns.end(xx, x + ++pulse[x]);
            } else {
              return fns.end(xx);
            }
          }
        },
        reset: function(x) {
          var k;

          if (x != null) {
            total.count -= count[x];
            total.time -= time[x];
            count[x] = time[x] = pulse[x] = 0;
            return start[x] = null;
          } else {
            for (k in count) {
              count[k] = time[k] = pulse[x] = 0;
              start[k] = null;
            }
            return total.count = total.time = 0;
          }
        },
        wait: function(y) {
          var _i, _results;

          _results = [];
          for (_i = 0; 0 <= y ? _i < y : _i > y; 0 <= y ? _i++ : _i--) {          }
          return _results;
        },
        spent: function(x) {
          var data, k, _ref, _ref1;

          if (x != null) {
            return {
              time: (_ref = time[x]) != null ? _ref : 0,
              count: (_ref1 = count[x]) != null ? _ref1 : 0,
              total: total
            };
          } else {
            data = {};
            for (k in count) {
              data[k] = {
                time: time[k],
                count: count[k]
              };
            }
            return {
              data: data,
              total: total
            };
          }
        }
      };
    })();

    return Debugate;

  })();

  _module = typeof window !== "undefined" && window !== null ? window : module;

  _module.exports = Debugate;

  if (typeof window !== "undefined" && window !== null) {
    _module.Debugate = Debugate;
  }

}).call(this);
